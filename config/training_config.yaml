project:
  name: "FuncXauusd_Reg"
  version: "2.1.0"
  
symbol:
  name: "XAUUSD_H1" # Основной файл должен называться XAUUSD_H1.csv
  timeframe: "H1"

trading:
  direction: "buy"
  risk:
    stop_loss: 10.0
    take_profit: 5.0
  labeling:
    min_bars: 1
    max_bars: 24
    decay: 0.96

data:
  backward: "2015-01-01"
  forward: "2023-01-01"
  full_forward: "2024-01-01"
  paths:
    raw: "./data/raw"
    processed: "./data/processed"
  
  # === MULTIFRAME CONFIGURATION ===
  multiframe:
    enabled: true
    # Используем доступные файлы: M1, M5, 15M, M30, H4
    timeframes: 
      - "M5"
      - "15M"  # Заметьте, имя файла XAUUSD_15M.csv
      - "M30"
      - "H4"

periods: [14, 24, 50, 96, 200]  # 14ч, 1 день, 2 дня, 4 дня, 8 дней
periods_meta: [24, 96]
markup: 0.25 

clustering:
  n_clusters: 1 
  random_state: 42
  n_init: 10

model:
  main:
    type: "CatBoostRegressor"
    params:
      iterations: 1000
      depth: 6
      learning_rate: 0.03
      l2_leaf_reg: 3
      loss_function: "RMSE"
      eval_metric: "R2"
      verbose: false
      early_stopping_rounds: 50
      task_type: "CPU"
      random_seed: 42
  
  meta:
    type: "CatBoostClassifier"
    params:
      iterations: 100
      depth: 3
      verbose: false
      allow_const_label: true # Разрешить константные метки (на всякий случай)

validation:
  train_size: 0.8
  shuffle: false
  criteria:
    min_class_balance: 0.0
    min_samples_per_class: 100

walk_forward:
  n_is_blocks: 10
  n_oos_blocks: 5
  min_r2: 0.005
  max_drawdown: 0.10
  noise_level: 0.002
  l2_increment: 1.0
  max_retries: 3

export:
  paths:
    models: "./models/trained"
    onnx: "./models/exported"
    mql: "./mql5/Include"