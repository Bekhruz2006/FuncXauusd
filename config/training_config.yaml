# ==================== ОСНОВНЫЕ ПАРАМЕТРЫ ====================
project:
  name: "FuncXauusd"
  version: "1.0.0"
  
symbol:
  name: "XAUUSD_H1"
  timeframe: "H1"

# ==================== НАПРАВЛЕНИЕ ТОРГОВЛИ ====================
trading:
  direction: "buy"
  
  risk:
    stop_loss: 10.0
    take_profit: 5.0
    risk_per_trade: 0.005
    max_positions: 3
    spread_limit: 25
    
  labeling:
    markup: 0.25
    min_bars: 1
    max_bars: 15

# ==================== ВРЕМЕННЫЕ ГРАНИЦЫ ====================
data:
  backward: "2004-06-11"
  forward: "2020-01-01"
  full_forward: "2026-01-01"
  
  paths:
    raw: "./data/raw"
    processed: "./data/processed"
    
  multiframe:
    enabled: false
    timeframes:
      - "1m"
      - "5m"
      - "15m"
      - "30m"
      - "1h"
      - "4h"
      - "1d"
      - "1w"
      - "1Month"

# ==================== ПРИЗНАКИ ====================
periods: [5, 35, 65, 95, 125, 155, 185, 215, 245, 275]
periods_meta: [5]

# ==================== РАЗМЕТКА ====================
markup: 0.25

# ==================== КЛАСТЕРИЗАЦИЯ ====================
clustering:
  algorithm: "kmeans"
  n_clusters: 8
  random_state: 42
  n_init: 10

# ==================== МОДЕЛЬ ====================
model:
  main:
    type: "CatBoostClassifier"
    params:
      iterations: 700
      depth: 5
      learning_rate: 0.03
      l2_leaf_reg: 3
      eval_metric: "Accuracy"
      custom_loss: ["Accuracy"]
      verbose: false
      use_best_model: true
      early_stopping_rounds: 50
      task_type: "CPU"
      thread_count: -1
      random_seed: 42
  
  meta:
    type: "CatBoostClassifier"
    params:
      iterations: 350
      depth: 4
      learning_rate: 0.03
      l2_leaf_reg: 3
      eval_metric: "F1"
      custom_loss: ["F1"]
      verbose: false
      use_best_model: true
      early_stopping_rounds: 30
      task_type: "CPU"
      thread_count: -1
      random_seed: 42

# ==================== ВАЛИДАЦИЯ ====================
validation:
  train_size: 0.75
  test_size: 0.25
  shuffle: true
  stratify: true
  random_state: 42
  
  criteria:
    min_class_balance: 0.2
    min_samples_per_class: 100
    max_drawdown_oos: 0.05
    max_drawdown_oot: 0.10

# ==================== ЭКСПОРТ ====================
export:
  paths:
    models: "./models/trained"
    onnx: "./models/exported"
    mql: "./mql5/Include"
  
  formats:
    - "onnx"
    - "cbm"
  
  onnx:
    domain: "ai.catboost"
    model_version: 1
    opset_version: 12

# ==================== БЭКТЕСТИНГ ====================
backtest:
  metrics:
    - "r2_score"
    - "sharpe_ratio"
    - "max_drawdown"
    - "profit_factor"
    - "win_rate"
  
  plot:
    enabled: true
    save_path: "./results/plots"

# ==================== ЛОГИРОВАНИЕ ====================
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  
  files:
    main: "./logs/training.log"
    errors: "./logs/errors.log"

# ==================== ПРОИЗВОДИТЕЛЬНОСТЬ ====================
performance:
  n_jobs: -1
  
  cache:
    enabled: true
    path: "./cache"
  
  numba:
    enabled: true
    parallel: true

# ==================== ВОСПРОИЗВОДИМОСТЬ ====================
reproducibility:
  random_seed: 42
  deterministic: true

# ==================== АВТОПОИСК ГИПЕРПАРАМЕТРОВ ====================
search:
  targets:
    val_accuracy: 0.75
    r2_score: 0.95
  
  max_iterations: 40
  early_stopping: true
  
  space:
    markup: [0.15, 0.18, 0.2, 0.22, 0.25, 0.28, 0.3, 0.35, 0.4]
    n_clusters: [6, 7, 8, 9, 10, 11, 12]
    
    periods:
      - [5, 35, 65, 95, 125, 155, 185, 215, 245, 275]
      - [5, 30, 55, 80, 105, 130, 155, 180, 205, 230]
      - [5, 25, 45, 65, 85, 105, 125, 145, 165, 185]
      - [5, 10, 15, 20, 30, 40, 50, 75, 100, 150, 200, 250]
      - [5, 15, 30, 50, 75, 100, 150, 200]
    
    meta_periods:
      - [5]
      - [10]
      - [5, 10]
      - [5, 15]
    
    model_depth: [4, 5, 6, 7]
    model_iterations: [300, 500, 700, 1000]
    min_samples: [600, 800, 1000, 1200, 1500]